<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
        // GitHub Pages 404 handler for client-side routing
        (function() {
            const path = window.location.pathname;
            
            // Don't redirect if this is a request for a resource file (CSS, JS, images, etc.)
            if (path.match(/\.(css|js|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|json)$/i)) {
                console.log('Resource file not found:', path);
                return; // Let it show 404 for missing resources
            }
            
            const pathSegments = path.split('/').filter(s => s);
            
            // Determine if we're on GitHub Pages (has repo name) or localhost
            // On localhost: /game-launcher -> pathSegments = ['game-launcher']
            // On GitHub: /website/game-launcher -> pathSegments = ['website', 'game-launcher']
            let repoName = '';
            let relativePath = '';
            
            // Check if first segment looks like a repo name (not a known route)
            const knownRoutes = ['macro', 'game-launcher', 'malware', 'index.html'];
            if (pathSegments.length > 0 && !knownRoutes.includes(pathSegments[0])) {
                // Likely on GitHub Pages with repo name
                repoName = pathSegments[0];
                if (pathSegments.length > 1) {
                    relativePath = '/' + pathSegments.slice(1).join('/');
                } else {
                    relativePath = '';
                }
            } else {
                // On localhost or direct route
                relativePath = pathSegments.length > 0 ? '/' + pathSegments.join('/') : '';
            }
            
            // Define route mappings
            const routes = {
                'macro': '/macro/',
                '/macro': '/macro/',
                '/macro/': '/macro/',
                'game-launcher': '/game-launcher/',
                '/game-launcher': '/game-launcher/',
                '/game-launcher/': '/game-launcher/',
                'malware': '/malware/',
                '/malware': '/malware/',
                '/malware/': '/malware/',
                '': '/index.html',
                '/': '/index.html',
                '/index': '/index.html'
            };
            
            // Check if we have a route for this relative path
            const targetPath = routes[relativePath];
            if (targetPath) {
                const fullPath = repoName ? '/' + repoName + targetPath : targetPath;
                
                // Redirect to the actual file
                console.log('Redirecting from', window.location.pathname, 'to', fullPath);
                window.location.replace(fullPath);
                return; // Stop execution
            }
            
            // If no route found, display 404 page
            console.log('No route found for:', window.location.pathname);
                // If no route found, try to display a helpful 404 page
                document.write(`
                    <!DOCTYPE html>
                    <html lang="en">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>404 - Page Not Found</title>
                        <style>
                            body {
                                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                min-height: 100vh;
                                margin: 0;
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                color: white;
                            }
                            .error-container {
                                text-align: center;
                                padding: 2rem;
                            }
                            h1 {
                                font-size: 6rem;
                                margin: 0;
                            }
                            p {
                                font-size: 1.5rem;
                                margin: 1rem 0;
                            }
                            a {
                                color: white;
                                text-decoration: none;
                                padding: 1rem 2rem;
                                background: rgba(255, 255, 255, 0.2);
                                border-radius: 8px;
                                display: inline-block;
                                margin-top: 1rem;
                                transition: background 0.3s;
                            }
                            a:hover {
                                background: rgba(255, 255, 255, 0.3);
                            }
                        </style>
                    </head>
                    <body>
                        <div class="error-container">
                            <h1>404</h1>
                            <p>Page not found</p>
                            <p>The page you're looking for doesn't exist.</p>
                            <a href="/${repoName}/">Go Home</a>
                        </div>
                    </body>
                    </html>
                `);
        })();
    </script>
</head>
<body>
    <div style="text-align: center; padding: 2rem; font-family: sans-serif;">
        <p>Redirecting...</p>
    </div>
</body>
</html>
